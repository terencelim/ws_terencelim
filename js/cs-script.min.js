function formatDate(e){var t=new Date(e),n=dayName[t.getDay()]+" "+("0"+t.getDate()).slice(-2)+" "+monthName[t.getMonth()]+" "+t.getFullYear();return n}function formatInputFormDate(e){return e.getFullYear().toString()+"-"+("0"+(e.getMonth()+1)).toString().slice(-2)+"-"+("0"+e.getDate()).toString().slice(-2)}function getRiskLevel(e){var t=0;return alertLevels.forEach(n=>{e.trim().toLowerCase()==n.alert.trim().toLowerCase()&&(t=n.risk)}),t}function findInfo(e){var t,n="",a=0,o=document.getElementById("suburb").value,r=new RegExp(o.trim(),"i");for(t=0;t<e.length;t++)e[t].Suburb.trim().search(r)>=0&&(n+=genTable(e[t],t),a+=1);document.getElementById("id04").innerHTML=a,document.getElementById("id02").innerHTML=tableHead+n+tableFoot}function genTable(e,t){var n=tableBody.replace("{{suburb}}",e.Suburb);return n=n.replace("{{venue}}",e.Venue),n=n.replace("{{address}}",e.Address),n=n.replace("{{date}}",formatDate(e.Date)),n=n.replace("{{time}}",e.Time),n=n.replace("{{lastupdate}}",formatDate(e["Last updated date"])),n=n.replaceAll("{{alert}}",getRiskLevel(e.Alert)),n=n.replaceAll("{{advice}}",t),n}function checkDate(e){var t,n=jsonObject.data.monitor,a=document.getElementById("suburb"),o=document.getElementById("date"),r="",d=0,u=new Date(todaysDate.getFullYear(),todaysDate.getMonth(),todaysDate.getDate()+e),l=new Date(o.value),c=new Date(l.getFullYear(),l.getMonth(),l.getDate());if(a.value="",e<0){for(o.value=formatInputFormDate(u),t=0;t<n.length;t++){var s=new Date(n[t].Date),i=new Date(s.getFullYear(),s.getMonth(),s.getDate());i>=u&&(r+=genTable(n[t],t),d+=1)}document.getElementById("id05").innerHTML=d,document.getElementById("id02").innerHTML=tableHead+r+tableFoot}if(0==e)if(c>=todaysDateOnly)checkSuburb();else{for(t=0;t<n.length;t++){s=new Date(n[t].Date),i=new Date(s.getFullYear(),s.getMonth(),s.getDate());i>=c&&i<=c&&(r+=genTable(n[t],t),d+=1)}document.getElementById("id05").innerHTML=d,document.getElementById("id02").innerHTML=tableHead+r+tableFoot}}function checkSuburb(){var e=jsonObject.data.monitor;findInfo(e)}function loadJSON(e){jsonObject=JSON.parse(e);var t=jsonObject.data.monitor;document.getElementById("id01").innerHTML=jsonObject.date,document.getElementById("id03").innerHTML=t.length,findInfo(t)}function devLoadJSON(){var e=jsonObject.data.monitor;document.getElementById("id01").innerHTML=jsonObject.date,document.getElementById("id03").innerHTML=e.length,findInfo(e)}function getLatestUrlJSON(e){var t,n=JSON.parse(e),a=n.result.resources;a.forEach(e=>{"json"==e.format.trim().toLowerCase()&&(t=e.url)}),loadData(t,loadJSON)}function loadData(e,t){var n=new XMLHttpRequest,a=!0;n.onreadystatechange=function(){4==this.readyState&&200==this.status&&(t(this.responseText),responseSuccess=!0)},n.open("GET",e,a),n.send()}function getData(){var e="https://data.nsw.gov.au/data/api/3/action/package_show?id=0a52e6c1-bc0b-48af-8b45-d791a6d8e289";loadData(e,getLatestUrlJSON)}function loadSuburbButtons(){Object.keys(suburbList).length;for(var e in suburbList)suburbList[e].forEach(t=>{var n,a=Object.keys(suburbList).indexOf(e);n=a+1<=btnColor.length?btnColor[a]:"btn-secondary",createButton(t,n)})}function createButton(e,t){let n=document.createElement("button");var a=document.getElementById("suburbList");n.innerHTML=e.trim(),n.setAttribute("class","btn btn-suburb "+t),n.setAttribute("onclick","javascript:document.getElementById('suburb').value=this.innerHTML;document.getElementById('id05').innerHTML='0';document.getElementById('date').value='';checkSuburb();"),a.appendChild(n)}function scrollFunction(){document.body.scrollTop>20||document.documentElement.scrollTop>20?mybutton.style.display="block":mybutton.style.display="none"}function topFunction(){document.body.scrollTop=0,document.documentElement.scrollTop=0}var jsonURL,jsonObject,responseSuccess=!1,todaysDate=new Date(Date.now()),todaysDateOnly=new Date(todaysDate.getFullYear(),todaysDate.getMonth(),todaysDate.getDate()),todaysDateFormatted=formatInputFormDate(todaysDate);loadSuburbButtons(),document.getElementById("date").value=todaysDateFormatted,getData();var mybutton=document.getElementById("btnTop");window.onscroll=function(){scrollFunction()};