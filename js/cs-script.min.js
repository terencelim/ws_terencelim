function formatDate(t){const e=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],a=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];var r=new Date(t),s=a[r.getDay()]+" "+("0"+r.getDate()).slice(-2)+" "+e[r.getMonth()]+" "+r.getFullYear();return s}function findInfo2(t){var e,a="",r=0,s=document.getElementById("suburb").value,n=new RegExp(s.trim(),"i");for(e=0;e<t.length;e++)if(t[e].Suburb.trim().search(n)>=0){var d=tableBody.replace("{{suburb}}",t[e].Suburb);d=d.replace("{{venue}}",t[e].Venue),d=d.replace("{{address}}",t[e].Address),d=d.replace("{{date}}",formatDate(t[e].Date)),d=d.replace("{{time}}",t[e].Time),d=d.replace("{{lastupdate}}",formatDate(t[e]["Last updated date"])),d=d.replace("{{alert}}",t[e].Alert),d=d.replace("{{advice}}",t[e].HealthAdviceHTML),a+=d,r+=1}document.getElementById("id04").innerHTML=r,document.getElementById("id02").innerHTML=tableHead+a+tableFoot}function scrapeHTML(t){parser=new DOMParser,xmlDoc=parser.parseFromString(t,"text/html"),jsonURL=xmlDoc.querySelector("#content > div.row > section > div > p > a").getAttribute("href"),loadData(jsonURL,loadJSON)}function getLatestUrlJSON(t){var e,a=JSON.parse(t),r=a.result.resources;r.forEach(t=>{"json"==t.format.trim().toLowerCase()&&(e=t.url)}),loadData(e,loadJSON)}function checkSuburb(){var t=jsonObject.data.monitor;findInfo2(t)}function loadJSON(t){jsonObject=JSON.parse(t);var e=jsonObject.data.monitor;document.getElementById("id01").innerHTML=jsonObject.date,document.getElementById("id03").innerHTML=e.length,findInfo2(e)}function loadData(t,e){var a=new XMLHttpRequest;a.onreadystatechange=function(){4==this.readyState&&200==this.status&&(e(this.responseText),responseSuccess=!0)},a.open("GET",t,!0),a.send()}function getData(){var t="https://data.nsw.gov.au/data/api/3/action/package_show?id=0a52e6c1-bc0b-48af-8b45-d791a6d8e289";loadData(t,getLatestUrlJSON)}function loadSuburbButtons(){var t={north:["Chatswood","Eastwood"],central:["Haymarket","Forest Lodge","Ultimo"],south:["Alexandria","Eastgardens","Kensington","Kingsford","Moore Park","Roseberry","Waterloo","Zetland"],southwest:["Bexley","Beverly Hills","Clemton Park","Hurstville","Kingsgrove","Tempe"],west:["Parramatta"]};for(var e in t){var a=["btn-warning","btn-danger","btn-danger","btn-primary","btn-primary"];t[e].forEach(r=>{var s=Object.keys(t).indexOf(e);createButton(r,a[s])}),document.getElementById("suburbList").appendChild(document.createElement("br"))}console.log(Object.keys(t).length)}function createButton(t,e){let a=document.createElement("button");var r=document.getElementById("suburbList");a.innerHTML=t.trim(),a.setAttribute("class","btn btn-suburb "+e),a.setAttribute("onclick","javascript:document.getElementById('suburb').value=this.innerHTML;checkSuburb();"),r.appendChild(a)}var jsonURL,jsonObject,responseSuccess=!1,tableHead="<table class='table table-sm table-striped fixed_header'><thead class='thead-dark'><tr><th scope='col' class='thSuburb'>Suburb</th><th scope='col' class='thVenue'>Venue</th><th scope='col' class='thAddress'>Address</th><th scope='col' class='thDate'>Date</th><th scope='col' class='thTime'>Time</th><th scope='col' class='thUpdate'>Last Updated</th><th scope='col' class='thAlert'>Alert</th><th scope='col' class='thAdvice'>Health Advice</th></tr></thead><tbody>",tableBody="<tr><td class='tdSuburb' title='Suburb'>{{suburb}}</td><td class='tdVenue' title='Venue'>{{venue}}</td><td class='tdAddress' title='Address'>{{address}}</td><td class='tdDate' title='Date'>{{date}}</td><td class='tdTime' title='Time'>{{time}}</td><td class='tdUpdate' title='Last Update'>{{lastupdate}}</td><td class='tdAlert' title='Alert'>{{alert}}</td><td class='tdAdvice' title='Health Advice'>{{advice}}</td></tr>",tableFoot="</tbody></table>";loadSuburbButtons(),getData();