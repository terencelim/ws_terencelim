function formatDate(e){var t=new Date(e),n=dayName[t.getDay()]+" "+("0"+t.getDate()).slice(-2)+" "+monthName[t.getMonth()]+" "+t.getFullYear();return n}function getRiskLevel(e){var t=0;return alertLevels.forEach(n=>{e.trim().toLowerCase()==n.alert.trim().toLowerCase()&&(t=n.risk)}),t}function findInfo2(e){var t,n="",o=0,a=document.getElementById("suburb").value,r=new RegExp(a.trim(),"i");for(t=0;t<e.length;t++)if(e[t].Suburb.trim().search(r)>=0){var u=tableBody.replace("{{suburb}}",e[t].Suburb);u=u.replace("{{venue}}",e[t].Venue),u=u.replace("{{address}}",e[t].Address),u=u.replace("{{date}}",formatDate(e[t].Date)),u=u.replace("{{time}}",e[t].Time),u=u.replace("{{lastupdate}}",formatDate(e[t]["Last updated date"])),u=u.replaceAll("{{alert}}",getRiskLevel(e[t].Alert)),u=u.replaceAll("{{advice}}",t),n+=u,o+=1}document.getElementById("id04").innerHTML=o,document.getElementById("id02").innerHTML=tableHead+n+tableFoot}function checkSuburb(){var e=jsonObject.data.monitor;findInfo2(e)}function loadJSON(e){jsonObject=JSON.parse(e);var t=jsonObject.data.monitor;document.getElementById("id01").innerHTML=jsonObject.date,document.getElementById("id03").innerHTML=t.length,findInfo2(t)}function devLoadJSON(){var e=jsonObject.data.monitor;document.getElementById("id01").innerHTML=jsonObject.date,document.getElementById("id03").innerHTML=e.length,findInfo2(e)}function getLatestUrlJSON(e){var t,n=JSON.parse(e),o=n.result.resources;o.forEach(e=>{"json"==e.format.trim().toLowerCase()&&(t=e.url)}),loadData(t,loadJSON)}function loadData(e,t){var n=new XMLHttpRequest,o=!0;n.onreadystatechange=function(){4==this.readyState&&200==this.status&&(t(this.responseText),responseSuccess=!0)},n.open("GET",e,o),n.send()}function getData(){var e="https://data.nsw.gov.au/data/api/3/action/package_show?id=0a52e6c1-bc0b-48af-8b45-d791a6d8e289";loadData(e,getLatestUrlJSON)}function loadSuburbButtons(){Object.keys(suburbList).length;for(var e in suburbList)suburbList[e].forEach(t=>{var n,o=Object.keys(suburbList).indexOf(e);n=o+1<=btnColor.length?btnColor[o]:"btn-secondary",createButton(t,n)})}function createButton(e,t){let n=document.createElement("button");var o=document.getElementById("suburbList");n.innerHTML=e.trim(),n.setAttribute("class","btn btn-suburb "+t),n.setAttribute("onclick","javascript:document.getElementById('suburb').value=this.innerHTML;checkSuburb();"),o.appendChild(n)}function scrollFunction(){document.body.scrollTop>20||document.documentElement.scrollTop>20?mybutton.style.display="block":mybutton.style.display="none"}function topFunction(){document.body.scrollTop=0,document.documentElement.scrollTop=0}var jsonURL,jsonObject,responseSuccess=!1;loadSuburbButtons(),getData();var mybutton=document.getElementById("btnTop");window.onscroll=function(){scrollFunction()};